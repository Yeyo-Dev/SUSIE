<div class="bio-overlay">
    <div class="bio-card" [class.slide-up]="showCard">

        <!-- Indicador de pasos dinÃ¡mico -->
        @if (steps().length > 0) {
        <susie-step-indicator [steps]="steps()" />
        }

        <!-- Header -->
        <div class="bio-header">
            <div class="icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                    <circle cx="12" cy="13" r="4"></circle>
                </svg>
            </div>
            <h2>VerificaciÃ³n de Identidad</h2>
            <p>Necesitamos validar que eres quien dices ser. Toma una foto clara de tu rostro.</p>
        </div>

        <!-- Camera / Photo Preview Area -->
        <div class="preview-container">
            @if (!capturedImage()) {
            <video #videoElement autoplay muted playsinline class="camera-feed"></video>
            <div class="face-guide">
                <div class="guide-corner tl"></div>
                <div class="guide-corner tr"></div>
                <div class="guide-corner bl"></div>
                <div class="guide-corner br"></div>
            </div>
            } @else {
            <img [src]="capturedImage()" class="photo-preview" alt="Foto capturada">
            }
        </div>

        <!-- Actions -->
        <div class="actions">
            @if (!capturedImage()) {
            <button class="btn-capture" (click)="capturePhoto()">
                <span class="btn-icon">ðŸ“¸</span>
                Tomar Foto
            </button>
            } @else {
            <button class="btn-secondary" (click)="retakePhoto()">
                Repetir
            </button>
            <button class="btn-primary" (click)="confirmPhoto()">
                <span class="btn-icon">âœ…</span>
                Confirmar y Continuar
            </button>
            }
        </div>

    </div>
</div>